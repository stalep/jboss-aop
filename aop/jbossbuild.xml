<?xml version="1.0"?>

<!--
 JBoss, the OpenSource J2EE webOS
 
 Distributable under LGPL license.
 See terms of license at gnu.org.
-->

<!-- ================================================================== -->
<!-- AOP component definition                                        -->
<!-- ================================================================== -->

<project name="project" 
         default="build" 
         basedir="."
>

   <import file="../tools/etc/jbossbuild/tasks.xml"/>
   <import file="component-info.xml"/>

   <!-- =============================================================== -->
   <!-- The component definition                                        -->
   <!-- =============================================================== -->

   <componentdef component="aop" description="JBoss AOP">

      <!-- ============================================================ -->
      <!-- The main source                                              -->
      <!-- ============================================================ -->

      <resource id="docs" path="../../docs"/>
      <resource id="aop-etc" path="../etc/"/>
      <resource id="aop-resources" path="."/>
      
      <source id="main" excludes="org/jboss/aop/hook/JRockit*">
         <include component="common"/>
         <include component="container"/>
         <include component="qdox"/>
         <include component="javassist"/>
         <include component="trove"/>
         <include component="oswego-concurrent"/>
      </source>
      
     <source id="jdk15" requiredJDK="1.5" jvmSource="1.5" jvmTarget="1.5">
         <include component="common"/>
         <include component="container"/>
         <include component="qdox"/>
         <include component="javassist"/>
         <include component="trove"/>
         <include component="oswego-concurrent"/>
         <include input="main"/>
      </source>      


 
      <!-- ============================================================ -->
      <!-- jboss-aop.jar                                                -->
      <!-- ============================================================ -->

      <artifactdef artifact="jboss-aop.jar">
         <include input="main">
            <include pattern="org/jboss/aop/**"/>
            <include pattern="org/jboss/lang/**"/>
            <include pattern="org/jboss/aspects/**"/>
         </include>
         <include input="docs"> 
            <include pattern="jboss-aop_1_0.dtd"/>
         </include>
      </artifactdef>
      
      
      <!-- ============================================================ -->
      <!-- jdk14-pluggable-instrumentor.jar                             -->
      <!-- ============================================================ -->      
      <artifactdef artifact="jdk14-pluggable-instrumentor.jar">
         <include input="main">
            <include pattern="org/jboss/aop/hook/JDK14*.class"/>
         </include>
      </artifactdef>
      
      <!-- ============================================================ -->
      <!-- jboss-aop-jdk50jar                                           -->
      <!-- ============================================================ -->      
      <artifactdef artifact="jboss-aop-jdk50.jar" requiredJDK="1.5">
         <include input="main">
            <include pattern="org/jboss/aop/**"/>
            <include pattern="org/jboss/lang/**"/>
            <include pattern="org/jboss/aspects/**"/>
            <exclude pattern="org/jboss/aop/annotation/AnnotationElement.class"/>
            <exclude pattern="org/jboss/aop/advice/Scope.class"/>
            <exclude pattern="org/jboss/aop/Aspect.class"/>
            <exclude pattern="org/jboss/aop/AnnotationIntroductionDef.class"/>
            <exclude pattern="org/jboss/aop/Bind.class"/>
            <exclude pattern="org/jboss/aop/CFlowDef.class"/>
            <exclude pattern="org/jboss/aop/CFlowStackDef.class"/>
            <exclude pattern="org/jboss/aop/DeclareError.class"/>
            <exclude pattern="org/jboss/aop/DeclareWarning.class"/>
            <exclude pattern="org/jboss/aop/DynamicCFlowDef.class"/>
            <exclude pattern="org/jboss/aop/Mixin.class"/>
            <exclude pattern="org/jboss/aop/InterceptorDef.class"/>
            <exclude pattern="org/jboss/aop/Introduction.class"/>
            <exclude pattern="org/jboss/aop/PointcutDef.class"/>
            <exclude pattern="org/jboss/aop/Precedence.class"/>
            <exclude pattern="org/jboss/aop/PrecedenceAdvice.class"/>
            <exclude pattern="org/jboss/aop/PrecedenceInterceptor.class"/>
            <exclude pattern="org/jboss/aop/Prepare.class"/>
            <exclude pattern="org/jboss/aop/TypeDef.class"/>
            <exclude pattern="org/jboss/aspects/Threadbased.class"/>
         </include>
         <include input="jdk15">
            <include pattern="org/jboss/aop/**"/>
	    <include pattern="org/jboss/aspects/**"/>
            <exclude pattern="org/jboss/aop/standalone/PluggableInstrumentor.class"/>
         </include>
         <include input="docs">
            <include pattern="jboss-aop_1_0.dtd"/>
         </include>
      </artifactdef>
      
      <!-- ============================================================ -->
      <!-- pluggable-interceptor.jar                                    -->
      <!-- ============================================================ -->      
      <artifactdef artifact="pluggable-instrumentor.jar" requiredJDK="1.5">
         <include input="jdk15">
              <include pattern="org/jboss/aop/standalone/PluggableInstrumentor.class"/>
         </include>
      </artifactdef>     
      
      

   </componentdef>

   <!-- Generate the targets -->   
   <generate generate="aop"/>

</project>
